<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webinar Host - Broadcasting</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="host-page">
    <div class="navbar">
        <div class="nav-brand">
            <svg width="32" height="32" viewBox="0 0 60 60" fill="none">
                <rect width="60" height="60" rx="12" fill="url(#gradient)"/>
                <path d="M30 15L40 25L30 35L20 25L30 15Z" fill="white"/>
                <path d="M30 25L40 35L30 45L20 35L30 25Z" fill="white" opacity="0.7"/>
                <defs>
                    <linearGradient id="gradient" x1="0" y1="0" x2="60" y2="60">
                        <stop offset="0%" style="stop-color:#667eea"/>
                        <stop offset="100%" style="stop-color:#764ba2"/>
                    </linearGradient>
                </defs>
            </svg>
            <span>Host Dashboard</span>
        </div>
        <div class="nav-info">
            <div class="status-badge" id="streamStatus">
                <span class="status-dot offline"></span>
                <span>Offline</span>
            </div>
            <div class="viewer-count">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                <span id="viewerCount">0</span>
                <span>viewers</span>
            </div>
        </div>
    </div>

    <div class="host-container">
        <div class="main-panel">
            <!-- VDO.Ninja Stream Container -->
            <div class="stream-container" id="streamContainer">
                <div class="preview-placeholder" id="previewPlaceholder">
                    <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                        <circle cx="12" cy="13" r="4"/>
                    </svg>
                    <p>Click "Go Live" to start broadcasting</p>
                </div>
                <iframe id="vdoNinjaFrame" style="display:none;width:100%;height:100%;border:none;" allow="camera;microphone;display-capture;autoplay;clipboard-write"></iframe>
            </div>

            <!-- Control Bar -->
            <div class="control-bar">
                <div class="controls-left">
                    <button class="control-btn" id="toggleVideo" onclick="toggleVideo()" disabled>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23 7l-7 5 7 5V7z"/>
                            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
                        </svg>
                        <span>Camera</span>
                    </button>
                    <button class="control-btn" id="toggleAudio" onclick="toggleAudio()" disabled>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                            <line x1="12" y1="19" x2="12" y2="23"/>
                            <line x1="8" y1="23" x2="16" y2="23"/>
                        </svg>
                        <span>Microphone</span>
                    </button>
                    <button class="control-btn" id="shareScreen" onclick="shareScreen()" disabled>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                            <line x1="8" y1="21" x2="16" y2="21"/>
                            <line x1="12" y1="17" x2="12" y2="21"/>
                        </svg>
                        <span>Share Screen</span>
                    </button>
                </div>
                <div class="controls-right">
                    <button class="btn btn-success" id="goLiveBtn" onclick="goLive()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="12" r="10"/>
                        </svg>
                        Go Live
                    </button>
                    <button class="btn btn-danger" id="endSessionBtn" onclick="endSession()" style="display:none;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <rect x="6" y="6" width="12" height="12"/>
                        </svg>
                        End Session
                    </button>
                </div>
            </div>
        </div>

        <div class="side-panel">
            <!-- Session Info -->
            <div class="info-card">
                <h3>Session Information</h3>
                <div class="info-row">
                    <span class="info-label">Room ID:</span>
                    <div class="info-value-group">
                        <span class="info-value" id="roomIdDisplay">-</span>
                        <button class="btn-icon-small" onclick="copyRoomId()" title="Copy Room ID">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="info-row">
                    <span class="info-label">Stream Quality:</span>
                    <span class="info-value">1080p HD</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Duration:</span>
                    <span class="info-value" id="duration">00:00:00</span>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="info-card">
                <h3>Quick Links</h3>
                <button class="link-btn" onclick="openViewerPage()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                        <polyline points="15 3 21 3 21 9"/>
                        <line x1="10" y1="14" x2="21" y2="3"/>
                    </svg>
                    Open Viewer Page
                </button>
                <button class="link-btn" onclick="openControlPage()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
                    </svg>
                    Open Control Panel
                </button>
                <button class="link-btn" onclick="copyViewerLink()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                    </svg>
                    Copy Viewer Link
                </button>
            </div>

            <!-- Stream Settings -->
            <div class="info-card">
                <h3>Stream Settings</h3>
                <div class="setting-row">
                    <label for="bitrateSelect">Video Bitrate:</label>
                    <select id="bitrateSelect" class="setting-select">
                        <option value="2500">High (2.5 Mbps)</option>
                        <option value="1500" selected>Medium (1.5 Mbps)</option>
                        <option value="800">Low (800 Kbps)</option>
                    </select>
                </div>
                <div class="setting-row">
                    <label for="codecSelect">Video Codec:</label>
                    <select id="codecSelect" class="setting-select">
                        <option value="vp8">VP8</option>
                        <option value="h264" selected>H.264</option>
                        <option value="vp9">VP9</option>
                    </select>
                </div>
            </div>

            <!-- Help -->
            <div class="info-card help-card">
                <h3>Tips</h3>
                <ul class="tips-list">
                    <li>Ensure good lighting for best video quality</li>
                    <li>Test audio levels before going live</li>
                    <li>Use a stable internet connection</li>
                    <li>Share the Room ID with your viewers</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="host.js?v=2"></script>
</body>
</html>